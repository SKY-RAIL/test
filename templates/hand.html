<!DOCTYPE html>
<html>
<head>
    <title>주문 페이지</title>
</head>
<body>
    <h1>주문 페이지</h1>
    <p>이름: {{ customer.name }}</p>

    {% if existing_order %}
        <h3>주문 내역</h3>
        <ul>
            {% for detail in existing_order.details %}
                <li>{{ detail.item }} - {{ detail.quantity }}개 ({{ detail.price }}원)</li>
            {% endfor %}
        </ul>
        <p>총 금액: {{ existing_order.total_price }}원</p>
        <form method="POST" action="{{ url_for('delete_order', customer_id=customer.id) }}">
            <button type="submit">주문 삭제</button>
        </form>
    {% else %}
        <form method="POST">
            {% for item in meat_items %}
                <div>
                    <label>{{ item.name }} ({{ item.price }}원)</label>
                    <input type="checkbox" name="items" value="{{ item.name }}">
                    <input type="number" name="quantities" min="1" value="1">
                </div>
            {% endfor %}
            <label for="delivery">배달 수령</label>
            <input type="radio" name="delivery" value="yes"> 배달 수령
            <input type="radio" name="delivery" value="no" checked> 직접 수령
            <br>

            <div id="delivery_info" style="display:none;">
                <label>보내는 사람 이름:</label><input type="text" name="sender_name"><br>
                <label>보내는 사람 연락처:</label><input type="text" name="sender_phone"><br>
                <label>보내는 사람 주소:</label><input type="text" name="sender_address"><br>
                <label>받는 사람 이름:</label><input type="text" name="receiver_name"><br>
                <label>받는 사람 연락처:</label><input type="text" name="receiver_phone"><br>
                <label>받는 사람 주소:</label><input type="text" name="receiver_address"><br>
            </div>

            <button type="submit">주문 완료</button>
        </form>
    {% endif %}

    <script>
        const deliveryRadios = document.querySelectorAll('input[name="delivery"]');
        const deliveryInfoDiv = document.getElementById("delivery_info");

        deliveryRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                if (this.value === "yes") {
                    deliveryInfoDiv.style.display = "block";
                } else {
                    deliveryInfoDiv.style.display = "none";
                }
            });
        });
    </script>
</body>
</html>
